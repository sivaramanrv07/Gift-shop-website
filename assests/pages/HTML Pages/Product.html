
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gift shop website </title>

    <link rel="stylesheet" href="../../../style.css">
    <script src="../../pages/JAVASCRIPT Pages/search.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>
<body>
    <!------------Header section starts -------------->
<header>
    <a href="#" class="logo"><img src="../../images/logo-icon.png" alt="" class="logo"></a>
    <div class="name">Giftopia</div>
    
       
      <ul class="nav-menu">
       <li><a href="../../../index.html" class="Home">Home</a></li>
       <li><a href="../../pages/HTML Pages/Feature.html" class="Features">Features</a></li>
       <li><a href="../../pages/HTML Pages/Product.html" class="Product">products</a></li>
       <li><a href="../../pages/HTML Pages/Review.html" class="Review">Review</a></li>
        <li><a href="../../pages/HTML Pages/Contact.html" class="Contact">Contact</a></li>
       
    </ul>
    <div class="nav-icons">
       <!--  <img id="search-icon" src="../../images/serach-icon.png"> -->
       <div class="search-container">
        <input type="text" class="search-input" placeholder="Search here..." id="searchBar">
        <button class="search-button" id="searchButton" type="submit">Search</button>
    </div>
        <a href="#"><img src="../../images/cart-icon.png"></a>
        <a href="../HTML Pages/login.html"><img src="../../images/user -icon.png"></a>
    </div>
</header>

<section id="Products" class="Products">
    <h1 class="content">Product<span>Catagories</span></h1>  
    <div class="product-slider" id="product-slider"></div>
</section>

<script>
    const jsonData = {
    "products": [
      {
        "name": "Plastic Round Magic Mirror",
        "image": "../../images/Product 1.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Card Board Frame",
        "image": "../../images/Product 2.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Photo Display Wall Hanging",
        "image": "../../images/Product 3.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Floor Pillow with images",
        "image": "../../images/Product 4.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Collage Frame",
        "image": "../../images/Product 5.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": " LED Table Lamps",
        "image": "../../images/Product 6.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Heart Beat Round Magic Mirror",
        "image": "../../images/Product 7.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Leather Keychain & Photo Book ",
        "image": "../../images/Product 8.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Magic Tea Cup",
        "image": "../../images/product 9.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Love Contract Agreement",
        "image": "../../images/product 10.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Illusion Photo Led Lamp",
        "image": "../../images/product 11.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Wallet Card With Photo",
        "image": "../../images/product 12.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Crystal Ball Night Lamp",
        "image": "../../images/product 13.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "MITZVAH Spotify code ",
        "image": "../../images/product 14.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Glass Ball Night LED Lamp",
        "image": "../../images/product 15.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Crystal Globe Lamp",
        "image": "../../images/product 16.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Fvawe Plastic Birthday Gifts",
        "image": "../../images/product 17.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Wedding Frame",
        "image": "../../images/product 18.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "MITZVAH Music Frame ",
        "image": "../../images/product 19.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Heart Shape LED Frame",
        "image": "../../images/product 20.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Light Lamp",
        "image": "../../images/product 21.jpeg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Crystal Music Code",
        "image": "../../images/product 22.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Leather Keychain With Calender ",
        "image": "../../images/product 23.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Graphic Photo Dice",
        "image": "../../images/product 24.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Digital Handmade Oil Painting",
        "image": "../../images/product 25.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Photo Print Digital Alarm Clock",
        "image": "../../images/product 26.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      },
      {
        "name": "Wooden Engraved Birthday Frame",
        "image": "../../images/product 27.jpg",
        "price": "$4.99/- to 10.99/-",
        "rating": 4.5,
        "link": "payement.html"
      }
      
    ]
  }
// Function to generate the product cards dynamically
window.onload = () => {
    const searchBar = document.getElementById('searchBar');
    const searchButton = document.getElementById('searchButton'); // Corrected ID here

    // Trigger search on button click
    searchButton.addEventListener('click', function () {
        const searchQuery = searchBar.value.trim();
        console.log("Search button clicked!");  // Debugging line
        if (searchQuery === '') {
            localStorage.removeItem('searchQuery');  // Clear query from localStorage when search is empty
            displayProducts(jsonData);  // Show all products when search is cleared
        } else {
            localStorage.setItem('searchQuery', searchQuery);  // Store query in localStorage
            performSearch(searchQuery);  // Perform search based on the search query
        }
    });

    // Allow search via Enter key
    searchBar.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
            searchButton.click();  // Trigger click when Enter is pressed
        }
    });

    // Handle clearing the search bar and showing all products again
    searchBar.addEventListener('input', function () {
        const searchQuery = searchBar.value.trim();
        if (searchQuery === '') {
            // If the search bar is cleared, show all products again
            localStorage.removeItem('searchQuery');  // Clear search query in localStorage
            displayProducts(jsonData);  // Display all products
        } else {
            performSearch(searchQuery);  // Perform search with the query
        }
    });

    // Load stored search query from localStorage when the page loads
    const storedQuery = localStorage.getItem('searchQuery');
    if (storedQuery) {
        searchBar.value = storedQuery;  // Restore the search query in the search bar
        performSearch(storedQuery);  // Perform search based on the stored query
    } else {
        displayProducts(jsonData);  // Show all products if no search query is stored
    }
};

// Function to display the products dynamically
function displayProducts(data) {
    const slider = document.getElementById('product-slider');
    slider.innerHTML = '';  // Clear previous products

    if (data.products.length === 0) {
        const noResultsMessage = document.createElement('div');
        noResultsMessage.classList.add('no-results');
        noResultsMessage.innerHTML = `<h3>No products found for your search.</h3>`;
        slider.appendChild(noResultsMessage);
    } else {
        // Loop through each product and generate product cards
        data.products.forEach(product => {
            const productDiv = document.createElement('div');
            productDiv.classList.add('products-box');
            productDiv.innerHTML = `
                <img src="${product.image}" alt="${product.name}">
                <h3>${product.name}</h3>
                <div class="prices">${product.price}</div>
                <div class="starts">${generateStars(product.rating)}</div>
                <a href="${product.link}" class="btn">
                    <button type="button" class="Button">Add to cart</button>
                </a>
                <a href="${product.link}" class="btn">
                    <button type="button" class="Buttons">Buy now</button>
                </a>
            `;
            slider.appendChild(productDiv);
        });
    }
}

// Function to generate star icons based on rating
function generateStars(rating) {
    let stars = '';
    for (let i = 1; i <= 5; i++) {
        if (i <= Math.floor(rating)) {
            stars += '<i class="fas fa-star"></i>';
        } else if (i === Math.ceil(rating) && rating % 1 !== 0) {
            stars += '<i class="fas fa-star-half-alt"></i>';
        } else {
            stars += '<i class="far fa-star"></i>';
        }
    }
    return stars;
}

// Function to filter products based on search query
function performSearch(query) {
    console.log("Performing search with query:", query);  // Debugging line
    const filteredData = {
        "products": query === '' ? jsonData.products : jsonData.products.filter(product =>
            product.name.toLowerCase().includes(query.toLowerCase())
        )
    };
    displayProducts(filteredData);  // Update product display
}

    </script>

</body>

</html>
